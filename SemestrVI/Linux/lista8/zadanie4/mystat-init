#!/sbin/openrc-run
command=/usr/bin/mystat
command_args="$mystat_args"
pidfile=/var/run/mystat.pid
name="Mystat Daemon"

description="Daemon that logs cpu usage"
extra_commands="rotate"
description_rotate="Reopens log files"

depend() {
  need localmount
  after bootmisc
}

start() {
  ebegin "Starting mystat daemon..."
  start-stop-daemon --start --quiet --make-pidfile --background \
                    --pidfile "$pidfile" --exec "$command" -- "$command_args"
  eend $?
}

rotate() {
  kill -SIGHUP $(cat "$pidfile")
  eend $?
}
